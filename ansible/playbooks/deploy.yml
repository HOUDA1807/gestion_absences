---
- name: Déployer gestion_absences
  hosts: web
  gather_facts: false

  collections:
    - community.docker

  tasks:
    - name: Démarrer ou redémarrer le conteneur
      community.docker.docker_container:
        name: gestion_absences
        image: gestion_absences_image:latest
        state: started
        restart_policy: always
        ports: 
          - "8080:8080"

    - name: Vérifier l'état du conteneur
      community.docker.docker_container_info:
        name: gestion_absences
      register: info

    - name: Afficher l’ID du conteneur
      debug:
        msg: "ID conteneur = {{ info.container.Id }}"
